{
  "hash": "85c82902841b701b467c200476454e84",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: 'AE 05: Tidying StatSci Majors'\nexecute:\n  warning: false\n  error: false\n---\n\n## Goal\n\nOur ultimate goal in this application exercise is to make the following data visualization.\n\n![](https://sta199-s24.github.io/images/statsci-plot.png){fig-alt=\"Line plot of numbers of Statistical Science majors over the years (2011 - 2021). Degree types represented are BS, BS2, AB, AB2. There is an increasing trend in BS degrees and somewhat steady trend in AB degrees.\" fig-align=\"center\"}\n\n## Data\n\nFor this exercise you will work with data on the proportions of Bachelorâ€™s degrees awarded in the US between 1970 and 2015.\nThe dataset you will use is in your `data/` folder and itâ€™s called `degrees.csv`.\n\n::: {#cell-load-packages-data .cell message='false' execution_count=1}\n``` {.python .cell-code}\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\ndata = pd.read_csv(\"data/degrees.csv\")\n\n# Filter data for any three different fields and years 2011-2023\nselected_fields = data[data['field'].isin(['Business', 'Engineering', 'Psychology']) & (data['year'] >= 2011) & (data['year'] <= 2023)]\n\n# Assuming each field represents a different degree type for the plot\nselected_fields['degree_type'] = selected_fields['field']\n\n# Plotting\nsns.color_palette(palette='BrBG')\n\nplt.figure(figsize=(10, 6))\nsns.lineplot(data=selected_fields, x='year', y='count', hue='degree_type', marker='o')\n\nplt.title('Selected Majors over the years\\nAcademic years 2011 - 2023')\nplt.xlabel('Graduation year')\nplt.ylabel('Number of majors graduating')\nplt.legend(title='Degree type')\nplt.grid(True)\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](ae-05-majors-tidying_files/figure-html/load-packages-data-output-1.png){#load-packages-data width=842 height=541}\n:::\n:::\n\n\nAnd let's take a look at the data.\n\n\n```{r}\nstatsci\n```\n\n\n## Pivoting\n\n-   **Demo:** Pivot the `statsci` data frame *longer* such that each row represents a degree type / year combination and `year` and `n`umber of graduates for that year are columns in the data frame.\n\n\n```{r}\n#| label: pivot\n\n# add your code here\n```\n\n\n-   **Question:** What is the type of the `year` variable? Why? What should it be?\n\n*Add your response here.*\n\n-   **Demo:** Start over with pivoting, and this time also make sure `year` is a numerical variable in the resulting data frame.\n\n\n```{r}\n#| label: pivot-with-transform\n\n# add your code here\n```\n\n\n-   **Question:** What does an `NA` mean in this context? *Hint:* The data come from the university registrar, and they have records on every single graduates, there shouldn't be anything \"unknown\" to them about who graduated when.\n\n*Add your response here.*\n\n-   **Demo:** Add on to your pipeline that you started with pivoting and convert `NA`s in `n` to `0`s.\n\n\n```{r}\n#| label: convert-na\n\n# add your code here\n```\n\n\n-   **Demo:** In our plot the degree types are BS, BS2, AB, and AB2. This information is in our dataset, in the `degree` column, but this column also has additional characters we don't need. Create a new column called `degree_type` with levels BS, BS2, AB, and AB2 (in this order) based on `degree`. Do this by adding on to your pipeline from earlier.\n\n\n```{r}\n#| label: degree-type\n\n# add your code here\n```\n\n\n-   **Your turn:** Now we start making our plot, but let's not get too fancy right away. Create the following plot, which will serve as the \"first draft\" on the way to our [Goal]. Do this by adding on to your pipeline from earlier.\n\n![](https://sta199-s24.github.io/images/statsci-plot-draft.png){fig-alt=\"Line plot of numbers of Statistical Science majors over the years (2011 - 2021). Degree types represented are BS, BS2, AB, AB2. There is an increasing trend in BS degrees and somewhat steady trend in AB degrees.\" fig-align=\"center\"}\n\n\n```{r}\n#| label: plot-draft\n\n# add your code here\n```\n\n\n-   **Your turn:** What aspects of the plot need to be updated to go from the draft you created above to the [Goal] plot at the beginning of this application exercise.\n\n*Add your response here.*\n\n-   **Demo:** Update x-axis scale such that the years displayed go from 2011 to 2023 in increments of 2 years. Do this by adding on to your pipeline from earlier.\n\n\n```{r}\n#| label: plot-improve-1\n\n# add your code here\n```\n\n\n-   **Demo:** Update line colors using the following level / color assignments. Once again, do this by adding on to your pipeline from earlier.\n    -   \"BS\" = \"cadetblue4\"\n\n    -   \"BS2\" = \"cadetblue3\"\n\n    -   \"AB\" = \"lightgoldenrod4\"\n\n    -   \"AB2\" = \"lightgoldenrod3\"\n\n\n```{r}\n#| label: plot-improve-2\n\n# add your code here\n```\n\n\n-   **Your turn:** Update the plot labels (`title`, `subtitle`, `x`, `y`, and `caption`) and use `theme_minimal()`. Once again, do this by adding on to your pipeline from earlier.\n\n\n```{r}\n#| label: plot-improve-3\n\n# add your code here\n```\n\n\n-   **Demo:** Finally, adding to your pipeline you've developed so far, move the legend into the plot, make its background white, and its border gray. Set `fig-width: 7` and `fig-height: 5` for your plot in the chunk options.\n\n\n```{r}\n#| label: plot-improve-4\n\n# add your code here\n```\n\n",
    "supporting": [
      "ae-05-majors-tidying_files"
    ],
    "filters": [],
    "includes": {}
  }
}